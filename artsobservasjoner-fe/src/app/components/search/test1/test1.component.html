<div class="page">

    <header class="page__header"></header>

    <div class="page__intro">

        <ng-container *ngIf="toggledItems$ | async as items">

            <div class="active-search" style="width: 50%;" *ngIf="items.length > 0">
                <small>{{ 'shared.search_chosenFilters' | translate}}: {{ items.length }}</small>

                <ng-container *ngIf="items.length < 3; else isBigger">

                    <div class="active-search__content" style="border: 1px solid red;" *ngFor="let item of items">
                        {{ item }}
                    </div>

                </ng-container>

                <ng-template #isBigger>

                    <div class="active-search__content" [ngClass]="{'active-search__content--toggle': items.length > 2}"
                        *ngFor="let item of items | slice: 0 : 1" (click)="toggleActiveFilters()">
                        {{item}}
                    </div>

                    <br>

                    <div class="active-search__box" [ngClass]="{'active-search__box--expanded': showActiveFiltersPane}"
                        style="border: 1px solid black;" *ngFor="let item of items | slice: 1">
                        {{item}}
                    </div>

                </ng-template>

            </div>

        </ng-container>

        <!--shareable non dummy component-->

        <button class="button button--primary button--md" style="width: auto;" (click)="toggle()" aria-controls="t1">
            Søk og filtrer
        </button>

        <br><br><br><br>

        <div class="search-wrapper" [ngClass]="{'search-wrapper--active' : isActive}" (click)="close()">
        </div>

        <div class="search" [ngClass]="{'search--active' : isActive}" [attr.aria-expanded]="isActive">

            <div class="search__content">

                <input class="input input--search" id="" placeholder="{{ 'shared.search_searchTaxon' | translate }}">
                <br>
                <!-- <div class="bulk" *ngFor="let item of array; let i = index">
                    <button class="bulk__button" [ngClass]="{'bulk__button--active' : buttonClicked === i}"
                        [attr.aria-expanded]="buttonClicked === i" (click)="toggleBulk($event, i)">
                        Filterbolk {{ i + 1 }}
                    </button>

                    <div class="bulk__content" [ngClass]="{'bulk__content--expanded': buttonClicked === i}"
                        *ngIf="buttonClicked === i">
                        <app-bulk></app-bulk>
                    </div>
                </div> -->
                <app-bulk></app-bulk>

            </div>

            <div class="search__bar">
                <button class="button button--sm" (click)="close()">Lukk</button>
                <button class="button button--sm button--full">Søk</button>
            </div>

        </div>





        <!--shareable non dummy component-->

    </div>

    <div class="page__content">

        <!-- <div *ngIf="sightings$ | async as sightings">

            <table>
                <thead>
                    <tr>
                        <th colspan="7">TEST</th>
                    </tr>
                </thead>
                <tbody>
                    <tr *ngFor="let sighting of sightings">
                        <td>{{ sighting.id }}</td>
                        <td><i>{{ sighting.taxon?.name }}</i></td>
                        <td>{{ sighting.taxon?.rank }}</td>
                        <td>{{ sighting.observed_on | date: 'dd.MM.YYYY' }}</td>
                        <td>{{ sighting.created_at | date: 'dd.MM.YYYY' }}</td>
                        <td>{{ sighting.user_login }}</td>
                    </tr>
                </tbody>
            </table>

        </div> -->

    </div>

    <footer class="page__footer"></footer>


</div>