<div class="child">

    <h2 *ngIf="pageTitle$ | async as pageTitle">{{ pageTitle }}</h2>

    <div class="section">

        <!--toppobservatører-->

        <p> Observatører med flest observasjoner gjennom tidene. </p>

        <h3>{{ 'shared.filter' | translate }}</h3>

        <div class="loop">

            <div class="filter">

                <select name="speciesGroupsSelector" id="speciesGroups" [(ngModel)]="selectedSpeciesGroup"
                    (ngModelChange)="onSpeciesGroupSelection($event)">

                    <option [ngValue]="null">
                        {{ 'shared.select_speciesGroups' | translate }}
                    </option>

                    <option [value]="sg.id" *ngFor="let sg of speciesGroups$ | async">
                        <ng-container *ngIf="currentLanguage$ | async as currentLanguage">
                            {{ currentLanguage === 'no' ? sg.no : sg.en }}
                        </ng-container>
                    </option>

                </select>

            </div>

            <div class="filter">

                <select name="yearSelector" id="years" [(ngModel)]="selectedYear"
                    (ngModelChange)="onYearSelection($event)">

                    <option [ngValue]="null">
                        {{ 'shared.select_years' | translate }}
                    </option>

                    <option [value]="year" *ngFor="let year of years">
                        {{ year }}
                    </option>

                </select>

            </div>

            <div class="filter">

                <select name="countiesSelector" id="counties" [(ngModel)]="selectedArea"
                    (ngModelChange)="onAreaSelection($event)">

                    <option [ngValue]="null">
                        {{ 'shared.select_area' | translate }}
                    </option>

                    <option [value]="area" *ngFor="let area of counties">
                        {{ area }}
                    </option>

                </select>

            </div>

            <div class="filter">

                <select name="" id="municipalities">
                    <option value="All">Alle kommuner</option>
                    <option value="">Trøndelag</option>
                    <option value="">Nordland</option>
                    <option value="">Rogaland</option>
                    <option value="">...</option>
                </select>

            </div>

        </div>

        <h3 style="color: green; margin: 25px 0 0">Selected {{ selectedSpeciesGroup }} / {{ selectedYear }} / {{ selectedArea }} </h3>

        <div *ngIf="userStatistics$ | async as userStatistics">

            <h3 style="color: red; margin: 0">tc: {{ userStatistics.totalCount }} &nbsp; / &nbsp;
                <span *ngIf="totalPages$ | async as totalPages" style="color: blue">
                    tp: {{ totalPages }}
                </span>
            </h3>

        </div>

        <br>

        <div class="stripe stripe--dummy">
            <div class="stripe__cell">
                {{ 'statistics.userStats_position' | translate }}
            </div>
            <div class="stripe__cell">
                {{ 'statistics.userStats_observer' | translate }}
            </div>

            <div class="stripe__cell">
                {{ 'statistics.userStats_sightingsCount' | translate }}
            </div>

            <div class="stripe__cell">
                {{ 'statistics.userStats_mediaCount' | translate }}
            </div>

        </div>

        <div *ngIf="userStatistics$ | async as userStatistics">

            <ng-container *ngFor="let topObserver of userStatistics.topObservers; let i = index">
                <app-user-stats-stripe [position]="getPosition(i, userStatistics.pageNumber, userStatistics.pageSize)"
                    [topObserver]="topObserver"></app-user-stats-stripe>
            </ng-container>

        </div>

        <br><br><br><br>

        <app-pagination *ngIf="totalPages$ | async as totalPages" [totalPages]="totalPages"
            (switchedPage)="onPageChange($event)"></app-pagination>

    </div>

</div>