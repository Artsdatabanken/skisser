<div class="child">

    <h2 *ngIf="pageTitle$ | async as pageTitle">{{ pageTitle }}</h2>

    <div class="section">

        <p class="body-text" [innerHTML]="'statistics.tableDescription_imageCountPerSpeciesGroup' | translate"></p>

        <div class="table-container" tabindex="0" role="region" aria-labelledby="caption1" *ngIf="data$ | async as data; else noData">

            <br>

            <table>
                <caption id="caption1" *ngIf="pageTitle$ | async as pageTitle">{{ pageTitle }}</caption>
                <thead role="rowgroup">
                    <tr role="row">
                        <th scope="col" role="columnheader">
                            {{ 'statistics.tableHeading_speciesGroup' | translate }}
                        </th>
                        <th scope="col" role="columnheader" class="th-number">
                            {{ 'statistics.tableHeading_imageCount' | translate }}
                        </th>
                        <th scope="col" role="columnheader" class="th-number">
                            {{ 'statistics.tableHeading_imageCountWithOpenLicence' | translate }}
                        </th>
                        <th scope="col" role="columnheader" class="th-number">
                            %
                        </th>
                    </tr>
                </thead>
                <tbody role="rowgroup">
                    <tr *ngFor="let item of data">
                        <td role="cell" [attr.data-heading]="'statistics.tableHeading_speciesGroup' | translate">
                            <ng-container *ngIf="currentLanguage$ | async as currentLanguage">

                                <ng-container *ngIf="currentLanguage === 'en'">{{ item.speciesGroup.en }}</ng-container>
                                <ng-container *ngIf="currentLanguage === 'no'">{{ item.speciesGroup.no }}</ng-container>

                            </ng-container>
                        </td>
                        <td role="cell" class="td-number"
                            [attr.data-heading]="'statistics.tableHeading_imageCount' | translate">
                            {{ item.imageCount | numberProxy }}
                        </td>
                        <td role="cell" class="td-number"
                            [attr.data-heading]="'statistics.tableHeading_imageCountWithOpenLicence' | translate">
                            {{ item.imageCountWithOpenLicence | numberProxy }}
                        </td>
                        <td role="cell" class="td-number" [attr.data-heading]="'%'">
                            {{ getPercentage(item.imageCount, item.imageCountWithOpenLicence) }} %
                        </td>
                    </tr>
                </tbody>
            </table>

        </div>


        <div class="chart-container">
            <canvas id="canvas1" #canvas1></canvas>
        </div>

        <div class="chart-container">
            <canvas id="canvas2" #canvas2></canvas>
        </div>

        <ng-template #noData>
            <app-error-response></app-error-response>
        </ng-template>

    </div>

</div>