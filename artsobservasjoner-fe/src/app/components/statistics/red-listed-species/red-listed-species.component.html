<div class="page page--stats">

    <header class="page__header"></header>

    <div class="page__intro"></div>

    <div class="page__content">

        <p class="body-text">
            {{ 'statistics.description_content' | translate: { value: translationParamValue } }}
            {{ 'statistics.description_includedData' | translate }}
        </p>

        <app-assessment-categories [categoryVariant]="assessmentCategoryTypes.redlist"></app-assessment-categories>

        <br>
        <p class="body-text">
            {{ 'statistics.description_includedDataExplanation' | translate }}
        </p>
        
        <div class="table-container" tabindex="0" role="region" aria-labelledby="caption1"
            *ngIf="data$ | async as redlistedSpecies; else noData">

            <ng-container *ngIf="currentLanguage$ | async as currentLanguage">

                <table class="custom-table" aria-describedby="redlist">
                    <caption id="caption1">{{ 'tables.tableCaption_redlistedSpeciesData' | translate }}</caption>
                    <thead role="rowgroup">
                        <tr role="row">
                            <th scope="col" role="columnheader">
                                {{ 'tables.tableHeading_speciesGroup' | translate }}
                            </th>
                            <th scope="col" role="columnheader">
                                {{ 'tables.tableHeading_riskGroup' | translate }}
                            </th>
                            <th scope="col" role="columnheader" class="th-number">
                                {{ 'tables.tableHeading_sightingsCount' | translate }}
                            </th>
                            <th scope="col" role="columnheader" class="th-number">
                                {{ 'tables.tableHeading_withMedia' | translate }}
                            </th>
                            <th scope="col" role="columnheader" class="th-number">
                                {{ 'tables.tableHeading_validated' | translate }}
                            </th>
                            <th scope="col" role="columnheader" class="th-number">
                                {{ 'tables.tableHeading_validatedAndApproved' | translate }}
                            </th>
                        </tr>
                    </thead>

                    <tbody role="rowgroup" *ngFor="let species of redlistedSpecies | keyvalue">
                        <tr role="row" *ngFor="let data of species.value.data; let i = index">

                            <th role="rowheader" scope="row">
                                <span *ngIf="i === 0">
                                    <app-species-group [speciesGroupId]="species.key"></app-species-group>
                                </span>

                                <!--for screen readers-->
                                <span *ngIf="i > 0" class="td-hidden">
                                    <app-species-group [speciesGroupId]="species.key"></app-species-group>
                                </span>
                                <!--for screen readers-->
                            </th>

                            <td role="cell">
                                {{ data.assessmentCategory.code }}

                                <span class="sr-only">

                                    <app-assessment-category [categoryVariant]="assessmentCategoryTypes.redlist"
                                        [assessmentCategoryId]="data.assessmentCategoryId">
                                    </app-assessment-category>

                                </span>

                            </td>
                            <td class="td-number" role="cell">
                                {{ data.sightingsCount | formatNumber }}
                            </td>
                            <td class="td-number" role="cell">
                                {{ data.imagesCount | formatNumber }}
                            </td>
                            <td class="td-number" role="cell">
                                {{ data.validatedCount | formatNumber }}
                            </td>
                            <td class="td-number" role="cell">
                                {{ data.approvedCount | formatNumber }}
                            </td>
                        </tr>
                    </tbody>
                </table>

            </ng-container>

            <p>
                {{ 'statistics.description_excluded' | translate }}
                <br />
                {{ 'statistics.description_approved' | translate }}
            </p>

            <app-validation-status-list [validationStatusType]="validationStatuses.approved" style="margin: auto;">
            </app-validation-status-list>


        </div>

        <ng-template #noData>
            <app-error-response></app-error-response>
        </ng-template>

        <br>

        <p class="body-text" [innerHTML]="'statistics.outro_redlistedSpecies' | translate"> </p>

    </div>

    <footer class="page__footer"> </footer>

</div>